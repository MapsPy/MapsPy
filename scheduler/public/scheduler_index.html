<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/static/css/style.css"/> 
    <link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/data_tables/css/jquery.dataTables.css"/>
    <link rel="stylesheet" href="/static/jstree_dist/themes/default/style.min.css" />
    <script src="/static/jquery/jquery-2.0.3.min.js"></script>
    <script src="/static/jstree_dist/jstree.min.js"></script>
    <script src="/static/data_tables/js/jquery.dataTables.js"></script>
    <script src="/static/notify.min.js"></script>
    <script src="/static/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="/static/js/core.js"></script>
    <title> Scheduler </title>
  </head>
  <body>
      <header class="header">
        <div><img src="/static/resources/anl_logo_new.min.png"/> </div>
      </header>
    <div class="tabs">
        <ul class="tab-links">
            <li class="active"><a href="#tab1">Job Status</a></li>
            <li><a href="#tab2">Submit XRF Job</a></li> 
            <li><a href="#tab3">Submit Ptychography Job</a></li> 
            <li><a href="#tab4"> Software Versions</a></li>
        </ul>
        <div class="tab-content">
            <div id="tab1" class="tab active">                
                <div id="process_nodes_div">
                    <table id="process_node_table" class="display_table display">
                     <thead>
                       <tr>
                        <th></th>
                        <th>Computer Name </th>
                        <th>Status</th>
                        <th>Max Threads</th>
                        <th>Heartbeat</th>
                        <th>System CPU %</th>
                        <th>System Memory %</th>
                        <th>System Swap %</th>
                       </tr>
                     </thead>
                    </table>
                 </div>
                <br>
                <br>
                <br>
                <br>
                <div id="jobs_div">
                    <table id="table_unprocessed_jobs" class="display_table display">
                        <thead>
                        <tr>
                            <th></th>
                            <th>Queued Jobs</th>
                            <th>Path</th>
                            <th>Status</th>
                            <th>Analysis</th>
                            <th></th>
                        </tr>
                        </thead>
                    </table>
                    <br>
                    <table id="table_processing_jobs" class="display_table display">
                        <thead>
                        <tr>
                            <th></th>
                            <th>Processing Jobs</th>
                            <th>Path</th>
                            <th>Status</th>
                            <th>Analysis</th>
                            <th></th>
                        </tr>
                        </thead>
                    </table>
                    <br>
                    <table id="table_finished_jobs" class="display_table display">
                        <thead>
                        <tr>  
                            <th></th>
                            <th>Finished Jobs</th>
                            <th>Path</th>
                            <th>Status</th>
                            <th>Analysis</th>
                            <th></th>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div>
                    <form>
                        <input type="radio" name="finished_job_limit" id="limit_100" >100
                        <input type="radio" name="finished_job_limit" id="limit_500" >500
                        <input type="radio" name="finished_job_limit" id="limit_1000" >1000
                        <input type="radio" name="finished_job_limit" id="limit_All" >All
                        
                    </form>
                </div>
            </div>

            <div id="tab2" class="tab">
                <fieldset>
                  <legend>Job Information:</legend>
                  Job Path:
                  <input type="text" id="DataPath" value="/"> 
                  <button id='Btn-Browse-production'>Browse xfm0</button>
                  <button id='Btn-Browse-verify'>Browse xfm0-data2</button>
                  <button id='Btn-Browse-cnm'>Browse CNM</button>
                  <div id="browse-jobs" class="overlay">
                       <div class="popup">
                           <h2>Jobs</h2>
                           <a class="close" href="/">&times;</a>
                           <div class="content"> 
                               <div id='jstree'>

                               </div>
                           </div>
                           <button id='Btn-Select-Dir'>Select</button>
                       </div>
                   </div>
                  <input type="checkbox" id="chk_all_datasets">All Datasets
                           <select id="datasets_list" multiple>
                           </select>
                  <br>
                   <input type="checkbox" id="analysis-type-a" value="A">A: Analyze datasets using ROI and ROI+<br>
                   <input type="checkbox" id="analysis-type-b" value="B">B: Extract integrated spectra from analyzed files and fit the spectra to optimize fit parameters<br>
                   <input type="checkbox" id="analysis-type-c" value="C">C: Analyze datasets using ROI, ROI+ and per pixel fitting<br>
                   <!--<input type="checkbox" id="analysis-type-d" value="D">D: N/A<br> -->
                   <input type="checkbox" id="analysis-type-e" value="E">E: Add exchange information to analyzed files (only for MapsPy)<br>
                   <!--<input type="checkbox" id="analysis-type-f" value="F">F: Create hdf5 file from single line netcdf files for flyscan<br>-->
                   <input type="checkbox" id="analysis-type-g" value="G">G: Generate average .h5 from each detector<br>
                   <input type="checkbox" id="option-quick-and-dirty">Quick and Dirty
                <!--   <input type="checkbox" id="option-xrf-bin">XRF Bin -->
                   <input type="checkbox" id="option-nnls">NNLS
                <!--   <input type="checkbox" id="option-xanes">XANES Scan -->
                   <input type="checkbox" id="option-is-live-job">Live Job
                   <br>
                   Detector to start with:
                   <input type="text" id="option-detector-to-start-with" value="0"><br>
                   Total Number of Detectors:
                   <input type="text" id="option-detector-elements" value="4"><br>
                   Number of <b>files</b> to process simultaneously: 
                   <input type="text" id="option-proc-per-file" value="1"> (only for MapsPy) <br> 
                   Number of <b>lines</b> to process simultaneously: 
                   <input type="text" id="option-proc-per-line" value="-1"> (-1 means max available) <br>
                   <!--Quantify counts with standard: 
                   <input type="text" id="option-standard" value=""> (usually maps_standardinfo.txt) <br>-->
                   Priority (1 highest - 10 lowest): 
                   <select id="priority">
                       <option value="1">1</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5</option>
                       <option value="6">6</option>
                       <option value="7">7</option>
                       <option value="8">8</option>
                       <option value="9">9</option>
                       <option value="10">10</option>
                   </select><br>
                   Process Node:
                   <select id="proc_node_option">
                       <option value="-1">Any
                   </select>
                   <form autocomplete="on">
                   Email Address on Completion (comma separated)<input type="text" name="email" id="option-emails" value="">
                   </form>
                  <br>
                  <br>
                  <button id="Btn-Submit-Job">Submit MapsPy Job</button>
                  <br>
                  <br>
                  <button id="Btn-Submit-Xrf-Maps-Job">Submit XRF-Maps Job (beta)</button>
                </fieldset>
            </div>
            
            
            <div id="tab3" class="tab">
                <fieldset>
                  <legend>Job Information:</legend>
                  Job Path:
                  <input type="text" id="Pty-DataPath" value="/"> 
                  <button id='Btn-Browse-Pty'>Browse xfm0</button>
                  <!--<button id='Btn-Browse-verify'>Browse xfm0-data2</button>-->
                  <div id="browse-pty-jobs" class="overlay">
                       <div class="popup">
                           <h2>Jobs</h2>
                           <a class="close" href="/">&times;</a>
                           <div class="content"> 
                               <div id='pty-jstree'>

                               </div>
                           </div>
                           <button id='Btn-Select-Pty-Dir'>Select</button>
                       </div>
                   </div>
                  <input type="checkbox" id="pty_chk_all_datasets">All Datasets
                           <select id="pty_datasets_list" multiple>
                           </select>
                  <br>

                  <input type="checkbox" id="pty-chk-calc-stxm" value=""> Calculated STXM & DPC only<br>
                  <br>
                  Algorithm:  <input type="checkbox" id="pty-chk-alg-epie"> ePIE   <input type="checkbox" id="pty-chk-alg-dm"> DM<br>
                  
                  Detector: Distance (m) <input type="text" id="pty-detector-dist" value="2.0">  Pixel size (nm) <input type="text" id="pty-dect-pix-size" value="172">  <br> 
                  
                  Diffraction Pattern: Center (Y, X) <input type="text" id="pty-diff-center-y" value="310">,  <input type="text" id="pty-diff-center-x" value="243">   Size <input type="text" id="pty-diff-size" value="256">  Rotate 90&#730 
                  <select id="pty-rotate">
                       <option value="0">0</option>
                       <option value="1">1</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                  </select>
                   <br> 
                   
                   Probe Size (nm): <input type="text" id="pty-probe-size" value="100"> Probe Modes: <input type="text" id="pty-probe-modes" value="1"> <br>
                   
                   Threshold: <input type="text" id="pty-threshold" value="0">  <br>
                   
                   Iterations: <input type="text" id="pty-iterations" value="100">  <br>
                   
                   Priority (1 highest - 10 lowest): 
                   <select id="pty-priority">
                       <option value="1">1</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5</option>
                       <option value="6">6</option>
                       <option value="7">7</option>
                       <option value="8">8</option>
                       <option value="9">9</option>
                       <option value="10">10</option>
                   </select><br>
                   Process Node: XFM1<br>
                   GPU Node: 
                   <!-- TODO: get this from process nodes when we have more than one -->
                   <select id="pty-gpu-node">
                       <option value="1">1</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5</option>
                       <option value="6">6</option>
                   </select><br>
                   <form autocomplete="on">
                   Email Address on Completion (comma separated)<input type="text" name="email" id="pty-option-emails" value="">
                   </form>
                  <br>
                  <br>
                  <button id="Btn-Submit-Pty-Job">Submit Job</button>
                  <br>
                </fieldset>
            </div>
            
            <div id="tab4" class="tab">
                <iframe width="1800" height="1500" src="/get_software_versions"></iframe>
            </div>            
        </div>
    </div>
  <footer class="footer">
      <center><div><img src="/static/resources/doe_logo_sc.png"/> </div></center>
  </footer>        
  </body>
  
</html>
